{% extends "::base.html.twig" %}
{% import "macros/forms.html.twig" as forms %}
{% import "macros/a.html.twig" as a %}

{% block floatingActions %}{{ a.add('balance_new') }}{% endblock %}

{% block panelBack %}
  <a href="{{ path('budget_index') }}" 
     class="btn btn-default btn-sm">
    <span class="glyphicon glyphicon-piggy-bank"></span>
  </a>
{% endblock %}

{% block panelTitle %}Budgeting{% endblock %}

{% block panelHeadingRight %}
  <a href="{{ path('balance_index') }}">Balance</a>
{% endblock %}

{% block panelBody %}
  <div class="table-responsive">
    <table class="table table-bordered table-condensed table-hover table-striped">
      <thead>
        <tr>
          <th>Item</th>
          <th>Date</th>
          <th>Days</th>
          <th>Value</th>
          <th class="text-right"><span class="pull-left">EGP</span> {{ balance.initial|number_format }}</th>
        </tr>
      </thead>
      <tbody>
        {% for row in balance.sheet %}
          <tr data-timestamp="{{ row.dateIndex.timestamp }}"
              class="{{ (balance.today.diff(row.dateIndex).d == 0) ? "text-bold active text-primary" }}">
            <td>{{ row.item }}</td>
            <td>{{ row.dateIndex|date('d/m/Y') }}</td>
            <td>{{ row.days.invert ? "-"}} {{ row.days|date  }}</td>
            <td class="text-right {{ (row.value <= 0) ? "text-success"}}">
              <span class="pull-left">EGP</span>
              {{ row.value|number_format }}
            </td>
            <td class="text-right {{ (row.balance <= 0) ? "text-danger"}}">
              <span class="pull-left">EGP</span>
              {{ row.balance|number_format }} 
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}