{% extends 'base.html.twig' %}
{% import "AppBundle:tasks:tasks_macros.html.twig" as tasks_view %}
{% block title %}Dashboard{% endblock %}
{# TODO: http://bootsnipp.com/user/favorites #}
{% block stylesheets %}
  {{ parent() }}
  <link rel="stylesheet" type="text/css" href="{{asset('/css/dashboard.css')}}"/>
{% endblock %}
{% block container %}
  <div class="floating-action dropup">
    <a class="btn btn-info dropdown-toggle" type="button" id="dahboardMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      Add
    </a>
    <ul class="dropdown-menu floating-actions" aria-labelledby="dahboardMenuButton">
      <li><a href="{{ path('tasks_new') }}" class="btn btn-info">Task</a></li>
      <li><a href="{{ path('tasklists_new') }}" class="btn btn-info">List</a></li>
      <li><a href="{{ path('days_new') }}" class="btn btn-info">Day</a></li>
      <li><a href="{{ path('notes_new') }}" class="btn btn-info">Note</a></li>
    </ul>
  </div>
  <div class="row">
    <div class="col-xs-12 col-sm-6 col-md-8 col-lg-8 scrollable">
      {{ tasks_view.ul(focus, 'workarea') }}
    </div>
    <div class="col-xs-12 col-sm-6 col-md-4 col-lg-4 scrollable">
      {% if days|length %}
        {% include 'AppBundle:days:days_list.html.twig' %}
      {% endif %}

      <!-- END OF ACCOUNTS -->
      {% if accounts|length %}
        {% set hideEmpty = true %}
        {% for key, progress in earned %}
          {% if 'monthly' == key %}
            {% include 'AppBundle:Dashboard:progressBars.html.twig' with {'total': attribute(costOfLife, key), 'progress': progress, 'issued': issuedThisMonth} %}
          {% else %}
            {% include 'AppBundle:Dashboard:progressBars.html.twig' with {'total': attribute(costOfLife, key), 'progress': progress} %}
          {% endif %}
        {% endfor %}
        {% include 'AppBundle:accounts:accounts_list.html.twig' %}
        <table class="table table-bordered">
          <thead>
            <tr>
              <th></th>
                {% for currency in costOfLife.currencies %}
                <th>{{ currency.code }}</th>
                {% endfor %}
            </tr>
          </thead>
          <tbody>
            {% for key,col in costOfLife.col %}
              <tr>
                <td>{{ key|capitalize }}</td>
                {% for code, value in col %}
                  <td class="text-right"><span class="float-left">{{ code|upper }} </span> {{ value|number_format }}</td>
                {% endfor %}
              </tr>
            {% endfor %}
          </tbody>
          <tfoot>
            <tr>
              <td colspan="4" class="text-center">USD 50 Per Day</td>
            </tr>
          </tfoot>
        </table>
      {% endif %}
      <!-- END OF ACCOUNTS -->

    </div>
  </div>
{% endblock %}
