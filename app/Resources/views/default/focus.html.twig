{% extends 'base.html.twig' %}
{% block title %}{{ tasks|first.task}} - myApp{% endblock %}
{% block nav %}{% endblock %}
{% block container %}
  <div class="floating-action" style="top: 25px;">
    <a href="{{ path('dashboard') }}" class="bg-embed"><span class="glyphicon glyphicon-home"></span></a>
  </div>
  <div class="floating-action" style="top: 75px;">
    <a href="{{ path('focus') }}" class="bg-embed"><span class="glyphicon glyphicon-refresh"></span></a>
  </div>
  <div class="floating-action" style="top: 125px;">
    <a href="#" class="bg-embed" id="cls"><strong>CLS</strong></a>
  </div>
  <div class="floating-action">
    <a class="bg-primary" data-toggle="modal" data-target="#newTask"><span class="glyphicon glyphicon-plus"></span></a>
  </div>
  <div class="container">
    {% include 'tasks/focus-tasks.html.twig' %}
  </div>

  <!-- Modal -->
  <div id="newTask" class="modal fade" role="dialog">
    {{ form_start(task_form) }}
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-body">
          {{ form_widget(task_form, {'attr':{'class':'form-group-sm'} }) }}
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default btn-sm pull-left" data-dismiss="modal">Cancel</button>
          <button type="submit" value="Edit" class="btn btn-success btn-sm"><span class="glyphicon glyphicon-floppy-disk"></span></button>
        </div>
      </div>
    </div>
    {{ form_end(task_form) }}
  </div>
{% endblock %}
{% block javascripts %}
  {{ parent() }}
  <script type="text/javascript">
    $(document).ready(function () {
      $('.task-list-name').dblclick(function () {
        $tasklist = $(this).data('tasklist');
        $('.task-list li').each(function () {
          console.log($(this).children('.task-list-name').text() + ' : ' + $tasklist);
          if($(this).children('.task-list-name').text() != $tasklist){
            $(this).hide();
          }
        });
      });
      $('#cls').click(function () {
        $('.task-list li').show();
      });
    });
  </script>
{% endblock %}
