{% extends 'base.html.twig' %}

{% block title %}Edit {{ transaction.name }}{% endblock %}
{% block floatingActions %}{{ a.add('transactions_new') }}{% endblock %}
{% block panelBack %}{{ a.back('transactions_index') }}{% endblock %}
{% block panelTitle %}{{ transaction.name }}{% endblock %}
{% block panelHeadingRight %}{{ forms.delete(delete_form) }}{% endblock %}
{% block panelBody %}
  {{ form_start(edit_form) }}
  <div class="panel-body">
    <div class="row">
      <div class="col-md-2">
        {{ form_widget(edit_form.name, {'attr': {'placeholder':'Name'} }) }}
      </div>
      <div class="col-md-2">
        {{ form_widget(edit_form.date) }}
      </div>
      <div class="col-xs-4 col-sm-2">
        {{ form_widget(edit_form.currency) }}
      </div>
      <div class="col-xs-8 col-sm-2">
        {{ form_widget(edit_form.EGP) }}
      </div>
      <div class="col-xs-8 col-sm-4">
        {{ form_widget(edit_form.value, {'attr': {'placeholder':'Value'} }) }}
      </div>
    </div>
  </div>
  <div class="panel-footer text-right">
    <button type="submit" value="Save" class="btn btn-success">
      <span class="glyphicon glyphicon-floppy-disk"></span></button>
  </div>
  {{ form_end(edit_form) }}
{% endblock %}
{% block javascripts %}
  {{ parent() }}
  <script>
    function updateEgp() {
      $('#appbundle_transactions_EGP').val(
              $('#appbundle_transactions_value').val() / $('#appbundle_transactions_currency :selected').data("egp")
              );
    }
    $('#appbundle_transactions_currency').change(updateEgp);
    $('#appbundle_transactions_value').change(updateEgp);
  </script>
{% endblock %}
