{% extends 'base.html.twig' %}

{% block floatingActions %}{{ a.add('tasklists_new') }}{% endblock %}
{% block panelTitle %}Task Lists{% endblock %}
{% block panelBody %}
  <ul class="list-group">
    {% for taskList in taskLists %}
      <li class="list-group-item">
        <a class="btn btn-default" href="{{ path('tasklists_show', { 'id': taskList.id }) }}">
          {{ taskList.name }}
          <span class="badge">{{ taskList.tasks|length }}</span>
          <span class="label label-default">{{ taskList.status|capitalize }}</span>
          <span class="label label-default">{{ taskList.createdAt ? taskList.createdAt|date('Y-m-d H:i') }}</span>
        </a>
        <div class="btn-group btn-group-sm edit-fixed-link">
          {{ a.add('tasks_new', {"tasklist": taskList.id}) }}
          <button type="button" class="btn btn-primary me" data-tasklistid="{{ taskList.id }}" data-tasklist="{{ taskList.name }}"><span class="glyphicon glyphicon-list-alt"></span></button>

          {{ a.edit('tasklists_edit', { 'id': taskList.id }) }}
        </div>
      </li>
    {% endfor %}
  </ul>
  <div class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        {{ form_start(tasksMassEdit_form) }}
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title"></h4>
        </div>
        <div class="modal-body">
          {{ form_widget(tasksMassEdit_form) }}
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Save changes</button>
        </div>
        {{ form_end(tasksMassEdit_form) }}
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
{% endblock %}
{% block javascripts %}
  {{ parent() }}
  <script type="text/javascript">
    $('.me').click(function () {
      $taskData = $(this);
      $('.modal-title').text($taskData.data('tasklist'));
      $('#tasks_mass_edit_taskList').val(($taskData.data('tasklistid')));
      $('.modal').modal();
    });
  </script>
{% endblock %}